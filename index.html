<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>AI Python Coach 10 ‚Äî Full (Login)</title>

  <!-- CodeMirror 5 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/lib/codemirror.min.css">
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/lib/codemirror.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/mode/python/python.min.js"></script>

  <!-- Hint -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/addon/hint/show-hint.min.css">
  <script src="https://cdn.jsdelivr.net/npm/codemirror@5.65.16/addon/hint/show-hint.min.js"></script>

  <!-- Pyodide (n·∫°p ƒë·ªông + fallback nhi·ªÅu ngu·ªìn ƒë·ªÉ ·ªïn ƒë·ªãnh tr√™n GitHub Pages / m·∫°ng tr∆∞·ªùng) -->
  <script>
    // Kh√¥ng thay ƒë·ªïi giao di·ªán/ch·ª©c nƒÉng: ch·ªâ tƒÉng ƒë·ªô ·ªïn ƒë·ªãnh t·∫£i Pyodide.
    (function(){
      const V = "0.25.1";
      // ∆Øu ti√™n CDN tr∆∞·ªõc ƒë·ªÉ tr√°nh b·ªã treo l√¢u khi repo ch∆∞a c√≥ th∆∞ m·ª•c ./pyodide/
      // N·∫øu b·∫°n c√≥ upload ./pyodide/ (offline CDN) th√¨ script s·∫Ω t·ª± chuy·ªÉn sang d√πng.
      const bases = [
        `https://cdn.jsdelivr.net/pyodide/v${V}/full/`,
        `https://cdn.jsdelivr.net/npm/pyodide@${V}/full/`,
        `https://unpkg.com/pyodide@${V}/full/`,
        "./pyodide/"
      ];
      function loadScript(url, timeoutMs){
        return new Promise((resolve, reject)=>{
          const s = document.createElement('script');
          s.src = url;
          s.async = true;
          s.crossOrigin = 'anonymous';
          const t = setTimeout(()=>{
            s.remove();
            reject(new Error('timeout'));
          }, timeoutMs || 15000);
          s.onload = ()=>{ clearTimeout(t); resolve(url); };
          s.onerror = ()=>{ clearTimeout(t); s.remove(); reject(new Error('error')); };
          document.head.appendChild(s);
        });
      }

      // Expose a promise so app code can await if needed.
      window.__PYODIDE_SCRIPT_READY = window.__PYODIDE_SCRIPT_READY || (async ()=>{
        if(window.loadPyodide) return {ok:true, from:'(cached)'};
        for(const base of bases){
          try{
            await loadScript(base + 'pyodide.js', 20000);
            if(window.loadPyodide) return {ok:true, from:base};
          }catch(e){}
        }
        return {ok:false, from:null};
      })();
    })();
  </script>

  <link rel="stylesheet" href="./style.css">
  <!-- Tr√°nh request favicon.ico (404) tr√™n GitHub Pages -->
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='8' ry='8' fill='%230a66ff'/%3E%3Ctext x='16' y='21' font-size='14' text-anchor='middle' fill='white' font-family='Arial'%3EAI%3C/text%3E%3C/svg%3E">
</head>

<body>

<!-- ===== LOGIN (H·ªçc sinh / Gi√°o vi√™n) ===== -->
<div id="loginRoot" class="loginWrap">
  <div class="loginCard">
    <div class="loginHead">
      <div class="loginBrand">
        <div class="loginLogo" id="lgLogo">HS</div>
        <div class="loginTitle">
          <h1 id="lgTitle">ƒêƒÉng nh·∫≠p h·ªçc sinh</h1>
          <p id="lgSub">D√πng <b>M√£ h·ªçc sinh</b> ƒë·ªÉ ƒëƒÉng nh·∫≠p ‚Ä¢ M·∫≠t kh·∫©u m·∫∑c ƒë·ªãnh: <b>123456</b></p>
        </div>
      </div>
      <span class="chip">L·ªõp: 10A1</span>
    </div>

    <div class="loginBody">
      <div class="chips" style="margin-top:0;">
        <button class="btn" id="tabStudent" style="border-radius:999px; padding:8px 12px;">H·ªçc sinh</button>
        <button class="btn" id="tabTeacher" style="border-radius:999px; padding:8px 12px;">Gi√°o vi√™n</button>
        <span class="chip" id="lgHintChip">G·ª£i √Ω: hs1, hs2, hs3‚Ä¶</span>
      </div>

      <div class="row">
        <div class="label" id="lgUserLabel">M√£ h·ªçc sinh</div>
        <input id="lgUser" class="input" placeholder="V√≠ d·ª•: hs12" autocomplete="username" />
      </div>
      <div class="row">
        <div class="label">M·∫≠t kh·∫©u</div>
        <input id="lgPass" class="input" type="password" placeholder="123456" autocomplete="current-password" />
      </div>

      <div class="row" style="grid-template-columns: 1fr; margin-top:14px;">
        <button id="lgBtn" class="btn primary">ƒêƒÉng nh·∫≠p</button>
      </div>

      <div id="lgErr" class="err">Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u.</div>
      <div class="hint" id="lgNote">
        * H·ªçc sinh: ƒëƒÉng nh·∫≠p b·∫±ng <b>M√£ h·ªçc sinh</b> trong danh s√°ch.<br>
        * Gi√°o vi√™n: t√†i kho·∫£n m·∫∑c ƒë·ªãnh <b>gv</b> ‚Ä¢ m·∫≠t kh·∫©u <b>123456</b>.
      </div>
    </div>
  </div>
</div>

<!-- ===== APP ROOT (·∫©n tr∆∞·ªõc khi login) ===== -->
<div id="appRoot">
  <div class="topbar">
    <div class="topbar-inner studentHeader">
      <div class="hdr-left">
        <div class="brand">
          <div class="logo">AI</div>
          <div class="hdrTitle">
            <h1><span class="hdrLabel">B√†i h·ªçc:</span> <span id="hdrLessonName">‚Äî</span></h1>
            <p>AI Python Coach 10 ‚Ä¢ L√†m b√†i ‚Üí Run ‚Üí PASS ƒë·ªÉ m·ªü kh√≥a</p>
          </div>
        </div>

        <div class="hdrMeta">
          <div class="pill" id="userPill" title="T√†i kho·∫£n ƒëang ƒëƒÉng nh·∫≠p" style="gap:10px;">
            <span class="dot ok"></span>
            <span id="userName">H·ªçc sinh</span>
            <span class="vsep" aria-hidden="true"></span>
            <span id="pyDot" class="dot warn"></span>
            <span id="pyStatus">ƒêang t·∫£i Python‚Ä¶</span>
            <button class="btn" id="btnLogout" style="padding:7px 10px; border-radius:999px; font-size:12px;">ƒêƒÉng xu·∫•t</button>
          </div>
</div>
      </div>

      <div class="hdr-center">
        <div class="progressWrap" title="Ti·∫øn tr√¨nh ho√†n th√†nh b√†i">
          <div class="progressBar" aria-label="Ti·∫øn tr√¨nh">
            <div id="progressFill" class="progressFill"></div>
          </div>
          <div class="progressText" id="progressText">0/0 ‚Ä¢ 0%</div>
        </div>
      </div>

      <div class="hdr-right">
        <div class="hdr-actions">
          <button class="btn hdr-btn hint" id="btnHint" title="M·ªü b·∫£ng g·ª£i √Ω / c√¥ng c·ª•">G·ª£i √Ω</button>
          <button class="btn hdr-btn lib" id="btnLibrary" title="Kho h·ªçc li·ªáu (video YouTube)">üìö</button>
          <button class="btn hdr-btn run" id="btnRun" disabled>Run</button>
          <button class="btn hdr-btn submit" id="btnSave" title="N·∫°p k·∫øt qu·∫£ ƒë·ªÉ gi√°o vi√™n nh·∫≠n/ƒë·ªëi chi·∫øu">N·∫°p k·∫øt qu·∫£</button>
          <button class="btn hdr-btn help" id="btnHelp" title="G·ª≠i tr·ª£ gi√∫p cho gi√°o vi√™n">Tr·ª£ gi√∫p</button>
        </div>
      </div>
    </div>
  </div>

  <div class="wrap">
    <div class="grid" id="grid">
      <!-- LEFT -->
      <div class="card left" id="leftCard">
        <div class="lessonHeader" id="lessonHeader">
          <div class="lessonPick">
            <div class="k" id="pickId">‚Äî</div>
            <div class="t" id="pickTitle">B√†i h·ªçc</div>
            <div class="s" id="pickSub">B·∫•m ƒë·ªÉ m·ªü danh s√°ch</div>
          </div>
          <div class="chev" id="chev">‚ñæ</div>
        </div>

        <!-- B√†i t·∫≠p v·ªÅ nh√† (Todo) ‚Äî hi·ªÉn th·ªã ∆∞u ti√™n ph√≠a tr√™n danh s√°ch b√†i -->
        <div id="todoBox" class="hintbox" style="margin:12px; display:none;">
          <strong>B√†i t·∫≠p v·ªÅ nh√†</strong>
          <div id="todoList" class="muted" style="color:#0b3b7a; line-height:1.55; margin-top:6px;">‚Äî</div>
        </div>

        <div class="lessonDrop" id="lessonDrop">
          <div class="lessonSearch">
            <div class="searchRow">
              <input class="search" id="lessonSearch" placeholder="T√¨m b√†i (vd: t·ªïng, if, prime, list...)" />
              <select class="search levelSel" id="levelFilter" aria-label="Ch·ªçn m·ª©c ƒë·ªô">
                <option value="all">T·∫•t c·∫£</option>
                <option value="easy">D·ªÖ</option>
                <option value="hard">Kh√≥</option>
                <option value="adv">N√¢ng cao</option>
              </select>
            </div>
          </div>
          <div class="lessonList" id="lessonList"></div>
        </div>

        <div class="card-b">
          <div class="muted">
            <b>Ph√≠m t·∫Øt:</b> Ctrl+Enter (Run) ‚Ä¢ Ctrl+Space (G·ª£i √Ω) ‚Ä¢ Tab (ch√®n ghost n·∫øu ƒë·ªß ƒëi·ªÅu ki·ªán) ‚Ä¢ Esc (·∫©n ghost)
          </div>
          <div class="sep"></div>
          <div class="muted">
            <b>L·ªô tr√¨nh:</b> PASS b√†i tr∆∞·ªõc ‚Üí m·ªü b√†i sau.
          </div>
        </div>
      </div>

      <!-- RIGHT -->
      <div class="card">
        <div class="card-h">
          <div class="title">
            <h3 id="taskTitle">‚Äî</h3>
            <p id="taskDesc">‚Äî</p>
          </div>
          <div class="toolbar">
            <!-- UI t·ªëi gi·∫£n: n√∫t ch√≠nh ƒë√£ chuy·ªÉn l√™n Header -->
<!-- C√°c n√∫t c≈© v·∫´n gi·ªØ ƒë·ªÉ kh√¥ng v·ª° ch·ª©c nƒÉng (·∫©n b·∫±ng CSS/JS) -->
            <button class="btn ghost" id="btnFocus" style="display:none;">Focus</button>
            <button class="btn ghost" id="btnScaffold" style="display:none;">N·∫°p khung</button>
            <button class="btn" id="btnExport" style="display:none;">Xu·∫•t CSV</button>
            <button class="btn" id="btnExam" style="display:none;" title="Thi 15 ph√∫t (kh√≥a g·ª£i √Ω)">Thi 15\'</button>
            <button class="btn" id="btnTest" style="display:none;" disabled>Test</button>
          </div>
        </div>

        <div class="card-b">
          <!-- H·ªó tr·ª£ (ch·ªâ th√™m, kh√¥ng thay ƒë·ªïi lu·ªìng c≈©) -->
          <div id="helpBox" class="card" style="display:none; margin-bottom:12px; border-style:dashed;">
            <div class="card-h">
              <div class="title">
                <h3 style="margin:0;font-size:14px;">G·ª≠i tr·ª£ gi√∫p cho gi√°o vi√™n</h3>
                <p style="margin:0;">G·ª≠i k√®m b√†i ƒëang l√†m, code hi·ªán t·∫°i v√† l·ªói g·∫ßn nh·∫•t (n·∫øu c√≥).</p>
              </div>
            </div>
            <div class="card-b">
              <div class="row" style="gap:10px; align-items:flex-start;">
                <textarea id="helpNote" class="input" rows="3" placeholder="M√¥ t·∫£ ng·∫Øn: em ƒëang k·∫πt ·ªü ƒë√¢u? (c√≥ th·ªÉ ghi ch√∫ th√™m)"></textarea>
                <div style="min-width:180px; display:flex; flex-direction:column; gap:8px;">
                  <button class="btn primary" id="btnSendHelp">G·ª≠i</button>
                  <button class="btn ghost" id="btnCloseHelp">ƒê√≥ng</button>
                </div>
              </div>
              <div class="muted" id="helpStatus" style="margin-top:8px;">‚Äî</div>
              <div class="sep"></div>
              <div id="helpPkgWrap" style="display:none;">
                <div class="muted" style="margin-bottom:6px;">M√£ tr·ª£ gi√∫p (n·∫øu gi√°o vi√™n d√πng m√°y kh√°c):</div>
                <textarea id="helpPackage" class="input" rows="3" readonly placeholder="Sau khi b·∫•m G·ª≠i, h·ªá th·ªëng t·∫°o m√£ ƒë·ªÉ b·∫°n sao ch√©p g·ª≠i cho gi√°o vi√™n..."></textarea>
                <div style="display:flex; gap:8px; margin-top:8px;">
                  <button class="btn" id="btnCopyHelpPackage">Sao ch√©p m√£</button>
                </div>
                <div class="muted" id="helpPkgStatus" style="margin-top:8px;">‚Äî</div>
              </div>

            </div>
          </div>

          <!-- NgƒÉn c√¥ng c·ª•: g·ª£i √Ω/think-guard/thi/so s√°nh/output... (m·∫∑c ƒë·ªãnh ·∫©n, m·ªü b·∫±ng n√∫t G·ª£i √Ω) -->
          <div id="studentToolsDrawer" style="display:none;">

          <div class="toolbar" style="margin-bottom:10px;">
            <select id="levelSel" title="M·ª©c g·ª£i √Ω">
              <option value="1">Coach: M·ª©c 1</option>
              <option value="2" selected>Coach: M·ª©c 2</option>
              <option value="3">Coach: M·ª©c 3</option>
            </select>

            <div class="pill" style="gap:10px;">
              <span style="font-weight:900;color:#0b3b7a">T·ª± g·ª£i √Ω</span>
              <span id="autoTog" class="toggle on" role="switch" aria-checked="true"></span>
            </div>

            <div class="think-pill">
              <span style="font-weight:900;color:#0b3b7a">T∆∞ duy</span>
              <span id="thinkTog" class="toggle on" role="switch" aria-checked="true"></span>
            </div>

            <div class="scorePill" title="ƒêi·ªÉm t∆∞ duy tƒÉng khi t·ª± g√µ, gi·∫£m khi l·∫°m d·ª•ng g·ª£i √Ω">
              <span>ƒêi·ªÉm t∆∞ duy:</span> <b id="thinkScore">0</b>
              <span>‚Ä¢ PASS:</span> <b id="passCount">0</b>
            </div>

            <div class="spacer"></div>

            <button class="btn" id="btnSample" title="N·∫°p input v√≠ d·ª•">Input m·∫´u</button>
            <button class="btn" id="btnClear" title="X√≥a output/l·ªói">X√≥a output</button>
            <button class="btn" id="btnCompare" title="So s√°nh Output v·ªõi ƒë√°p √°n m·∫´u">So s√°nh Output</button>
          </div>



          <div id="examBar" class="hintbox" style="margin-bottom:10px; display:none; background: rgba(255,251,235,.9); border-color: rgba(245,158,11,.35);">
            <strong>Ch·∫ø ƒë·ªô thi 15 ph√∫t</strong>
            <div class="muted" style="color:#7c2d12; margin-top:6px; display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;">
              <div><b id="examTimer">15:00</b> ‚Ä¢ C√¢u: <b id="examIdx">1</b>/<b id="examTotal">5</b> ‚Ä¢ ƒêi·ªÉm: <b id="examScore">0</b></div>
              <div style="display:flex; gap:8px;">
                <button class="btn" id="btnSubmitExam" style="border-radius:999px; padding:8px 10px;">N·ªôp b√†i</button>
                <button class="btn" id="btnExitExam" style="border-radius:999px; padding:8px 10px;">Tho√°t</button>
              </div>
            </div>
          </div>

          <div id="flowBox" class="hintbox" style="margin-bottom:10px; display:block;">
            <strong>Quy tr√¨nh l√†m b√†i</strong>
            <div class="muted" style="color:#0b3b7a; margin-top:6px;">L√†m theo th·ª© t·ª± ƒë·ªÉ r√®n th√≥i quen: <b>ƒê·ªçc ƒë·ªÅ ‚Üí √ù t∆∞·ªüng ‚Üí Code ‚Üí Test</b>.</div>
            <div style="display:flex; gap:8px; flex-wrap:wrap; margin-top:10px;">
              <button class="btn" id="stepRead" style="border-radius:999px; padding:8px 10px;">1) ƒê√£ ƒë·ªçc ƒë·ªÅ</button>
              <button class="btn" id="stepIdea" style="border-radius:999px; padding:8px 10px;" disabled>2) ƒê√£ vi·∫øt √Ω t∆∞·ªüng</button>
              <button class="btn" id="stepCode" style="border-radius:999px; padding:8px 10px;" disabled>3) ƒê√£ vi·∫øt code</button>
              <button class="btn" id="stepTest" style="border-radius:999px; padding:8px 10px;" disabled>4) ƒê√£ Test</button>
            </div>
            <div style="margin-top:10px;">
              <textarea id="ideaText" class="input" rows="3" style="width:100%; resize:vertical; border-radius:14px; padding:10px 12px;"
                placeholder="Vi·∫øt ng·∫Øn g·ªçn √Ω t∆∞·ªüng: ƒë·∫ßu v√†o l√† g√¨, x·ª≠ l√Ω th·∫ø n√†o, in ra g√¨‚Ä¶" disabled></textarea>
              <div class="muted" id="flowHint" style="color:#0b3b7a; margin-top:6px;">B·∫Øt ƒë·∫ßu b·∫±ng vi·ªác b·∫•m <b>1) ƒê√£ ƒë·ªçc ƒë·ªÅ</b>.</div>
            </div>
          </div>

          <div class="guard">
            <strong>Think-Guard (ch·ªëng ph·ª• thu·ªôc) ‚Äî G·ª£i √Ω theo t·∫ßng</strong>
            <div class="muted" id="guardText" style="color:#0b3b7a">
              Ch·ªçn t·∫ßng g·ª£i √Ω.
            </div>
            <div class="stageRow">
              <button class="stage active" data-stage="1">T·∫ßng 1: √ù</button>
              <button class="stage" data-stage="2">T·∫ßng 2: Khung</button>
              <button class="stage" data-stage="3">T·∫ßng 3: ƒêi·ªÅn khuy·∫øt</button>
              <button class="stage" data-stage="4">T·∫ßng 4: Ho√†n thi·ªán d√≤ng</button>
            </div>
            <div class="chips" id="guardChips"></div>
          </div>

          </div> <!-- /studentToolsDrawer -->

          <!-- ===== Editor V2 (Monaco + Realtime Coach) =====
               Hi·ªÉn th·ªã trong iframe ƒë·ªÉ tr√°nh xung ƒë·ªôt CSS/JS, ƒë·ªìng b·ªô b·∫±ng postMessage.
          -->
          <div id="editorV2Wrap" style="margin-bottom:12px;">
            <iframe
              id="editorV2Frame"
              src="./editor_v2.html"
              title="Python Editor V2"
              style="width:100%; height:920px; border:0; border-radius:14px; background:#fff; box-shadow:0 8px 22px rgba(16,24,40,.06);"
              loading="lazy"
            ></iframe>
          </div>

                    <div class="panel active" id="panel-task">
          <div class="hintbox">
            <strong>ƒê·ªÅ b√†i</strong>
            <div id="taskText" class="muted" style="color:#0b3b7a; line-height:1.55">‚Äî</div>
            <div>
              <span class="chip" id="chipIn">Input: ‚Äî</span>
              <span class="chip" id="chipOut">Output: ‚Äî</span>
              <span class="chip" id="chipSkill">K·ªπ nƒÉng: ‚Äî</span>
            </div>
          </div>
        </div>

        

<div class="editor-wrap">
            <textarea id="code" style="display:none;"></textarea>
          </div>



          <div class="io">
            <div>
              <b>Input (stdin)</b>
              <div class="muted">Nh·∫≠p d·ªØ li·ªáu ƒë·∫ßu v√†o (n·∫øu ƒë·ªÅ y√™u c·∫ßu).</div>
              <textarea id="stdin" placeholder="V√≠ d·ª•: 5&#10;3 7&#10;..."></textarea>
            </div>
            <div>
              <b>Output / L·ªói</b>
              <div class="muted">K·∫øt qu·∫£ ch·∫°y v√† l·ªói hi·ªÉn th·ªã ·ªü ƒë√¢y.</div>
              <div class="console" id="console">‚è≥ ƒêang t·∫£i m√¥i tr∆∞·ªùng Python‚Ä¶</div>
            </div>
          </div>
        </div>

        <div class="tabs">
          <div class="tab active" data-tab="task">ƒê·ªÅ</div>
          <div class="tab" data-tab="coach">Coach</div>
          <div class="tab" data-tab="tests">Test</div>
          <div class="tab" data-tab="custom">T·ª± ra ƒë·ªÅ</div>
                    <div class="tab" data-tab="video">Video</div>
<div class="tab" data-tab="log">Nh·∫≠t k√Ω</div>
        </div>

        <div class="panel" id="panel-coach">
          <div class="hintbox">
            <strong>Coach</strong>
            <div id="coachHint" class="muted" style="color:#0b3b7a; line-height:1.55">
              D·ª´ng g√µ 1.3s ho·∫∑c Run/Test ƒë·ªÉ c·∫≠p nh·∫≠t g·ª£i √Ω.
            </div>
            <ul class="ul" id="coachSteps"></ul>
          </div>

          <div class="sep"></div>

          <b>Checklist ti·∫øn ƒë·ªô</b>
          <div class="muted">Nh√¨n ‚úÖ/‚¨ú ƒë·ªÉ bi·∫øt c√≤n thi·∫øu b∆∞·ªõc n√†o.</div>
          <div class="check" id="checklist"></div>

          <div class="sep"></div>

          <b>L·ªói hay g·∫∑p</b>
          <ul class="ul" id="pitfalls"></ul>
        </div>

        <div class="panel" id="panel-tests">
          <div class="hintbox">
            <strong>Ch·∫•m t·ª± ƒë·ªông (Test cases)</strong>
            <div class="muted" style="color:#0b3b7a; line-height:1.55">
              B·∫•m <b>Test</b> ƒë·ªÉ ch·∫•m PASS/FAIL theo b·ªô test.
            </div>
            <div class="sep"></div>
            <div class="muted" id="testsInfo">‚Äî</div>
          </div>
        </div>

        <div class="panel" id="panel-log">
          <div class="hintbox">
            <strong>Nh·∫≠t k√Ω h·ªçc t·∫≠p</strong>
            <div class="muted" style="color:#0b3b7a; line-height:1.55">
              L∆∞u t·ª± ƒë·ªông: th·ªùi gian, Run/Test, s·ªë l·∫ßn d√πng g·ª£i √Ω, l·ªói th∆∞·ªùng g·∫∑p, PASS/FAIL.
            </div>
            <div class="sep"></div>
            <div class="muted" id="logView">‚Äî</div>
          </div>
        </div>

        <div class="panel" id="panel-custom">
          <div class="hintbox">
            <strong>T·ª± ra ƒë·ªÅ (b√†i c·ªßa em)</strong>
            <div class="muted" style="color:#0b3b7a; line-height:1.55">
              Nh·∫≠p ƒë·ªÅ b√†i (m√¥ t·∫£ + Input/Output + v√≠ d·ª•). Nh·∫•n <b>Ph√¢n t√≠ch</b> ƒë·ªÉ nh·∫≠n g·ª£i √Ω theo 4 t·∫ßng (kh√¥ng ƒë∆∞a l·ªùi gi·∫£i ho√†n ch·ªânh).
              Nh·∫•n <b>T·∫°o b√†i &amp; l√†m ngay</b> ƒë·ªÉ th√™m v√†o danh s√°ch b√†i (t·ª± m·ªü kh√≥a cho ri√™ng em).
            </div>
            <div class="sep"></div>

            <div class="toolbar" style="gap:10px; flex-wrap:wrap;">
              <select id="cpLevel" class="input" style="max-width:180px; padding:10px 12px;">
                <option value="easy">M·ª©c: D·ªÖ</option>
                <option value="hard">M·ª©c: Kh√≥</option>
                <option value="adv">M·ª©c: N√¢ng cao</option>
              </select>
              <input id="cpTitle" class="input" style="min-width:260px; padding:10px 12px;" placeholder="Ti√™u ƒë·ªÅ b√†i (VD: T√≠nh t·ªïng ch·ªØ s·ªë)" />
              <button class="btn" id="btnCpAnalyze">Ph√¢n t√≠ch</button>
              <button class="btn primary" id="btnCpCreate">T·∫°o b√†i &amp; l√†m ngay</button>
              <button class="btn" id="btnCpClear">X√≥a nh√°p</button>
            </div>

            <div class="row" style="margin-top:10px;">
              <div class="label">M√¥ t·∫£ ƒë·ªÅ b√†i</div>
              <textarea id="cpText" class="input" style="min-height:110px; padding:10px 12px;" placeholder="Nh·∫≠p m√¥ t·∫£ ƒë·ªÅ b√†i..."></textarea>
            </div>

            <div class="row" style="margin-top:10px; display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
              <div>
                <div class="label">Input</div>
                <textarea id="cpInput" class="input" style="min-height:70px; padding:10px 12px;" placeholder="M√¥ t·∫£ input..."></textarea>
              </div>
              <div>
                <div class="label">Output</div>
                <textarea id="cpOutput" class="input" style="min-height:70px; padding:10px 12px;" placeholder="M√¥ t·∫£ output..."></textarea>
              </div>
            </div>

            <div class="row" style="margin-top:10px; display:grid; grid-template-columns: 1fr 1fr; gap:10px;">
              <div>
                <div class="label">V√≠ d·ª• Input</div>
                <textarea id="cpSampleIn" class="input" style="min-height:70px; padding:10px 12px;" placeholder="VD:\n5\n"></textarea>
              </div>
              <div>
                <div class="label">V√≠ d·ª• Output</div>
                <textarea id="cpSampleOut" class="input" style="min-height:70px; padding:10px 12px;" placeholder="VD:\n15\n"></textarea>
              </div>
            </div>

            <div class="sep"></div>
            <b>K·∫øt qu·∫£ ph√¢n t√≠ch &amp; g·ª£i √Ω theo t·∫ßng</b>
            <div class="muted" style="margin-top:6px;">C√°c g·ª£i √Ω n√†y c≈©ng s·∫Ω xu·∫•t hi·ªán trong Think-Guard khi em ƒëang code.</div>
            <div class="sep"></div>
            <div class="muted" id="cpAnalysisOut">‚Äî</div>

            <div class="sep"></div>
            <b>B√†i t·ª± t·∫°o c·ªßa em</b>
            <div class="muted">B·∫•m ƒë·ªÉ m·ªü nhanh.</div>
            <div class="chips" id="cpMyList" style="margin-top:8px;"></div>
          </div>
        </div>


        <div class="panel" id="panel-video">
          <div class="hintbox">
            <strong>Video b√†i h·ªçc</strong>
            <div class="muted" style="color:#0b3b7a; line-height:1.55">
              Ch·ªçn video ph√π h·ª£p v·ªõi b√†i ƒëang h·ªçc. Em c√≥ th·ªÉ d√°n link video c·ªßa m√¨nh (YouTube ho·∫∑c file mp4) ƒë·ªÉ xem l·∫°i c√°ch l√†m.
            </div>
            <div class="sep"></div>

            <div class="row" style="gap:10px; align-items:end; flex-wrap:wrap">
              <div style="min-width:220px; flex:1">
                <div class="muted" style="margin-bottom:6px">Ch·ªçn video theo b√†i</div>
                <select id="videoSelect" class="select" style="width:100%"></select>
              </div>
              <div style="min-width:260px; flex:2">
                <div class="muted" style="margin-bottom:6px">Ho·∫∑c d√°n link video c·ªßa em</div>
                <input id="videoCustom" class="input" placeholder="V√≠ d·ª•: https://youtu.be/... ho·∫∑c https://.../video.mp4" style="width:100%"/>
              </div>
              <button id="videoApply" class="btn" style="height:40px; border-radius:999px">M·ªü video</button>
            </div>

            <div class="sep"></div>

            <div class="videoWrap">
              <div id="videoPlayer" class="videoPlayer muted">Ch∆∞a ch·ªçn video.</div>
            </div>

            <div class="muted" id="videoMeta" style="margin-top:10px">‚Äî</div>
          </div>
        </div>




      </div>
    </div>
  </div>

  <div id="toast" class="toast"></div>
</div>



<!-- ===== TEACHER ROOT (NEW) ===== -->
<div id="teacherRoot" style="display:none;">
  <div class="tTopbar">
    <div class="tTopbarInner">
    <div class="tTopbarLeft">
      <div class="tLogo">GV</div>
      <div>
        <div class="tTitle">B·∫£ng ƒëi·ªÅu khi·ªÉn gi√°o vi√™n</div>
        <div class="tSub">Qu·∫£n l√Ω l·ªõp ‚Ä¢ Giao b√†i ‚Ä¢ K·∫øt qu·∫£ ‚Ä¢ Ng√¢n h√†ng ‚Ä¢ Tr·ª£ gi√∫p</div>
      </div>
    </div>
    <div class="tTopbarRight">
      <span id="teacherName" class="tTeacherName">‚Äî</span>
      <button class="btn ghost" id="tBtnBackup" title="Xu·∫•t d·ªØ li·ªáu (JSON)">Sao l∆∞u</button>
      <label class="btn ghost" for="tRestoreFile" title="Nh·∫≠p d·ªØ li·ªáu (JSON)" style="cursor:pointer;">Kh√¥i ph·ª•c</label>
      <input id="tRestoreFile" type="file" accept="application/json" style="display:none;">
      <button class="btn primary" id="tBtnRefresh" title="L√†m m·ªõi">L√†m m·ªõi</button>
      <button class="btn" id="tBtnLogout" style="padding:8px 10px; border-radius:999px; font-size:12px;">ƒêƒÉng xu·∫•t</button>
    </div>
    </div>
  </div>

  <div class="tShell">
    <aside class="tSide">
      <button class="tNav active" data-view="overview">T·ªïng quan</button>
      <button class="tNav" data-view="roster">L·ªõp &amp; H·ªçc sinh</button>
      <button class="tNav" data-view="assign">Giao b√†i</button>
      <button class="tNav" data-view="results">K·∫øt qu·∫£</button>
      <button class="tNav" data-view="bank">Ng√¢n h√†ng c√¢u h·ªèi</button>
      <button class="tNav" data-view="help">Tr·ª£ gi√∫p h·ªçc sinh</button>

      <div class="tSideFooter muted">
        L∆∞u √Ω: ph·∫ßn h·ªçc sinh gi·ªØ nguy√™n 100%.<br>
        D·ªØ li·ªáu gi√°o vi√™n l∆∞u tr√™n tr√¨nh duy·ªát (LocalStorage).
      </div>
    </aside>

    <main class="tMain">
      <div id="tView_overview" class="tView"></div>
      <div id="tView_roster" class="tView" style="display:none;"></div>
      <div id="tView_assign" class="tView" style="display:none;"></div>
      <div id="tView_results" class="tView" style="display:none;"></div>
      <div id="tView_bank" class="tView" style="display:none;"></div>
      <div id="tView_help" class="tView" style="display:none;"></div>
    </main>
  </div>

  <div class="tModalBackdrop" id="tModalBackdrop" style="display:none;"></div>
  <div class="tModal" id="tModal" style="display:none;"></div>
</div>


<!-- Python runtime (offline, kh√¥ng ph·ª• thu·ªôc t·∫£i WASM/CDN) -->
<script src="./vendor/skulpt/skulpt.min.js"></script>
<script src="./vendor/skulpt/skulpt-stdlib.js"></script>

<script src="./00_login.js"></script>
<script src="./01_student.js"></script>
<script src="./02_teacher.js"></script>
<script src="./03_patches.js"></script>

  <!-- Help Modal (HS g·ª≠i tr·ª£ gi√∫p) -->
  <div id="helpModal" class="modal" style="display:none;">
    <div class="modal-backdrop" data-close="1"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="helpModalTitle">
      <div class="modal-head">
        <h3 id="helpModalTitle">Tr·ª£ gi√∫p gi√°o vi√™n</h3>
        <button class="btn ghost" id="helpModalClose" style="border-radius:999px; padding:8px 10px;">ƒê√≥ng</button>
      </div>
      <div class="modal-body">
        <div class="muted" style="color:#0b3b7a; margin-bottom:8px;">
          M√¥ t·∫£ ng·∫Øn v·∫•n ƒë·ªÅ b·∫°n ƒëang g·∫∑p. H·ªá th·ªëng s·∫Ω g·ª≠i k√®m b√†i ƒëang l√†m, code v√† l·ªói g·∫ßn nh·∫•t.
        </div>
        <textarea id="helpModalNote" class="input" rows="4" placeholder="V√≠ d·ª•: Em b·ªã k·∫πt ·ªü b∆∞·ªõc nh·∫≠p d·ªØ li·ªáu / v√≤ng l·∫∑p..."></textarea>
        <div style="display:flex; gap:10px; margin-top:10px; justify-content:flex-end; flex-wrap:wrap;">
          <button class="btn primary" id="helpModalSend">G·ª≠i</button>
        </div>
        <div class="muted" id="helpModalStatus" style="margin-top:10px;">‚Äî</div>
      </div>
    </div>
  </div>

</body>
</html>
